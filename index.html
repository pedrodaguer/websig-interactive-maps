<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo - Concelho de Faro</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

    <!-- CSS personalizado -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <!-- Header -->
    <header>
        <h1>Mapa Interativo - Concelho de Faro</h1>
        <p>Escolas e Postos de Combust√≠vel</p>
    </header>

    <!-- Painel Lateral -->
    <aside class="sidebar">
        <!-- Controle de Camadas -->
        <div class="panel">
            <h3>Camadas Base</h3>
            <div class="layer-controls">
                <label>
                    <input type="radio" name="baseLayer" value="osm" checked> OpenStreetMap
                </label>
                <label>
                    <input type="radio" name="baseLayer" value="satellite"> Sat√©lite
                </label>
            </div>
        </div>

        <!-- Visibilidade das Camadas -->
        <div class="panel">
            <h3>Camadas de Dados</h3>
            <label>
                <input type="checkbox" id="toggleEscolas" checked> Escolas
            </label>
            <label>
                <input type="checkbox" id="togglePostos" checked> Postos de Combust√≠vel
            </label>
            <label>
                <input type="checkbox" id="toggleCustom" checked> Pontos Personalizados
            </label>
            <label>
                <input type="checkbox" id="toggleArvores" checked> √Årvores
            </label>
        </div>

        <!-- Filtros de Escolas -->
        <div class="panel">
            <h3>Filtros - Escolas</h3>
            <label>
                <input type="checkbox" class="filter-escola" value="ciclo1" checked> 1¬∫ Ciclo
            </label>
            <label>
                <input type="checkbox" class="filter-escola" value="ciclo2" checked> 2¬∫ Ciclo
            </label>
            <label>
                <input type="checkbox" class="filter-escola" value="ciclo3" checked> 3¬∫ Ciclo
            </label>
            <label>
                <input type="checkbox" class="filter-escola" value="secundario" checked> Secund√°rio
            </label>
            <label>
                <input type="checkbox" class="filter-escola" value="sede" checked> Sede de Agrupamento
            </label>
        </div>

        <!-- Filtros de Postos -->
        <div class="panel">
            <h3>Filtros - Postos</h3>
            <div id="bandeira-filters"></div>
        </div>

        <!-- Bot√£o Reset -->
        <div class="panel">
            <button id="resetFiltersBtn" class="tool-btn" style="background-color: #f59e0b;">üîÑ Resetar Filtros</button>
        </div>

        <!-- Ferramentas -->
        <div class="panel">
            <h3>Ferramentas</h3>
            <button id="measureBtn" class="tool-btn">üìè Medir Dist√¢ncia</button>
            <button id="addPointBtn" class="tool-btn">üìç Adicionar Ponto</button>
            <button id="addArvoreBtn" class="tool-btn">üå≥ Adicionar √Årvore</button>
            <button id="exportArvoresBtn" class="tool-btn">üíæ Exportar √Årvores</button>
            <button id="importArvoresBtn" class="tool-btn">üìÇ Importar √Årvores</button>
            <input type="file" id="importArvoresFile" accept=".json,.geojson" style="display: none;">
        </div>
        <div id="measureResult" class="measure-result"></div>
    </aside>

    <!-- Mapa -->
    <main>
        <div id="map"></div>
    </main>
</div>

<!-- Modal para Adicionar Ponto -->
<div id="addPointModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Adicionar Ponto de Interesse</h2>
        <form id="pointForm">
            <label for="pointName">Nome</label>
            <input type="text" id="pointName" required>

            <label for="pointCategory">Categoria</label>
            <select id="pointCategory" required>
                <option value="comercio">Com√©rcio Tradicional</option>
                <option value="patrimonio">Patrim√≥nio</option>
                <option value="arvore">√Årvore</option>
                <option value="outro">Outro</option>
            </select>

            <label for="pointDescription">Descri√ß√£o</label>
            <textarea id="pointDescription" rows="3"></textarea>

            <div class="form-buttons">
                <button type="submit" class="btn-primary">Guardar</button>
                <button type="button" class="btn-secondary" id="cancelBtn">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para Adicionar √Årvore -->
<div id="arvoreModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Adicionar √Årvore ao Invent√°rio</h2>
        <form id="arvoreForm">
            <label for="arvoreEspecie">Esp√©cie</label>
            <input type="text" id="arvoreEspecie" required>

            <label for="arvoreNomeComum">Nome Comum</label>
            <input type="text" id="arvoreNomeComum">

            <label for="arvoreAltura">Altura (m)</label>
            <input type="number" id="arvoreAltura" step="0.1" min="0">

            <label for="arvoreDiametro">Di√¢metro (cm)</label>
            <input type="number" id="arvoreDiametro" step="0.1" min="0">

            <label for="arvoreEstado">Estado</label>
            <select id="arvoreEstado" required>
                <option value="excelente">Excelente</option>
                <option value="bom">Bom</option>
                <option value="regular">Regular</option>
                <option value="ruim">Ruim</option>
                <option value="critico">Cr√≠tico</option>
            </select>

            <label for="arvoreLocalizacao">Localiza√ß√£o</label>
            <input type="text" id="arvoreLocalizacao">

            <label for="arvoreObservacoes">Observa√ß√µes</label>
            <textarea id="arvoreObservacoes" rows="3"></textarea>

            <label for="arvoreCadastradoPor">Cadastrado Por</label>
            <input type="text" id="arvoreCadastradoPor">

            <div class="form-buttons">
                <button type="submit" class="btn-primary">Guardar</button>
                <button type="button" class="btn-secondary" id="cancelArvoreBtn">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Scripts da aplica√ß√£o -->
<script src="config.js"></script>
<script src="geoserver.js"></script>
<script src="filters.js"></script>
<script src="measure.js"></script>
<script src="digitalization.js"></script>
<script src="inventario-arboreo.js"></script>
<script src="app.js"></script>
</body>
</html>
